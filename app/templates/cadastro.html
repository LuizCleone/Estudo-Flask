<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>

    <!-- Font Awesome -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
        
    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cadastro.css') }}">
</head>
<body>

    <!-- Navbar -->
    <header id="navbar">
        <nav id="navbar-items">
            <a href="{{ url_for('login_page') }}">
                <i class="fas fa-sign-in-alt"></i> Login</a>
            <a href="{{ url_for('contato') }}">
                <i class="fas fa-envelope"></i> Contato</a>
            <a href="{{ url_for('inicial')}}">
                <i class="fas fa-sign-out-alt"></i> sair</a>
        </nav>
    </header>

    <!-- Conte√∫do principal (imagem + formul√°rio) -->
    <main id="register-container">
        <!-- LADO DA IMAGEM -->
        <div class="image-side">
            <div class="image-text">
                <h2>Bem-vindo ao Bairro Henrique Jorge!</h2>
                <p>Cadastre-se como morador  ou com√©rcio e fa√ßa parte da nossa comunidade.</p>
            </div>
        </div>

            <!-- LADO DO FORMUL√ÅRIO -->
        <div class="cadastro-container">
            <!-- Mensagens Flash -->
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                <ul class="flash-messages">
                  {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                  {% endfor %}
                </ul>
              {% endif %}
            {% endwith %}
            <div class="form-control">
                <h1>Cadastro</h1>
                    <!-- Seletor de tipo -->
                <div class="form-group">
                    <label for="tipoCadastro">Selecione o tipo de cadastro:</label>
                    <select id="tipoCadastro" onchange="mostrarFormulario()">
                        <option value="">-- Escolha --</option>
                        <option value="morador">Morador üè†</option>
                        <option value="comercio">Com√©rcio üè¨</option>
                    </select>
                </div>
                    <!-- Formul√°rio de Morador -->
                <form id="formMorador" method="POST">
                {{ form.hidden_tag() }}
                    <input type="hidden" name="tipo" value="morador">
                    <div class="form-group">
                        {{ form.nome.label }} {{ form.nome(size=30) }}
                    </div>
                    <div class="form-group">
                        {{ form.sobrenome.label }} {{ form.sobrenome(size=30) }}
                    </div>
                    <div class="form-group">
                        {{ form.email.label }} {{ form.email(size=30) }}
                    </div>
                    <div class="form-group">
                        {{ form.endereco.label }} {{ form.endereco(size=50) }}
                    </div>
                    <div class="form-group">
                        {{ form.senha.label }} {{ form.senha(size=30) }}
                    </div>
                    <div class="form-group">
                        {{ form.confirmacao_senha.label }} {{ form.confirmacao_senha(size=30) }}
                    </div>
                    <div class="form-group">
                        {{ form.btnSubmit(class="btn-submit") }}
                    </div> 
                </form>

                    <!-- Formul√°rio de Com√©rcio -->
                <form id="formComercio" method="POST" class="hidden">
                {{ form.hidden_tag() }}
                    <input type="hidden" name="tipo" value="comercio">
                    <div class="form-group">
                        {{ form.nomefantasia.label }} {{ form.nomefantasia(size=30) }}
                    </div>
                    <div class="form-group">
                        {{ form.cnpj.label }} {{ form.cnpj(size=18) }}
                    </div>
                    <div class="form-group">
                        {{ form.proprietario.label }} {{ form.proprietario(size=30) }}
                    </div>
                    <div class="form-group">
                        {{ form.senha.label }} {{ form.senha(size=30) }}
                    </div>
                    <div class="form-group">
                        {{ form.confirmacao_senha.label }} {{ form.confirmacao_senha(size=30) }}
                    </div>
                    <div class="form-group">
                        {{ form.btnSubmit(class="btn-submit") }}
                    </div> 
                </form>                
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Guia do Bairro Henrique Jorge</p>
        <div class="social-links">
            <a href="https://facebook.com/paginahenriquejorge" target="_blank"><i class="fab fa-facebook-f"></i></a>
            <a href="https://instagram.com/henriquejorgeoficial" target="_blank"><i class="fab fa-instagram"></i></a>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Alterna a exibi√ß√£o dos formul√°rios conforme o tipo selecionado
        function mostrarFormulario() {
            const tipo = document.getElementById("tipoCadastro").value;
            const formMorador = document.getElementById("formMorador");
            const formComercio = document.getElementById("formComercio");

            formMorador.classList.add("hidden");
            formComercio.classList.add("hidden");

            if (tipo === "morador") {
                formMorador.classList.remove("hidden");
            } else if (tipo === "comercio") {
                formComercio.classList.remove("hidden");
            }
        }

        // Remove mensagens flash automaticamente
        setTimeout(() => {
            document.querySelectorAll(".flash-messages li").forEach(msg => {
                msg.style.transition = "opacity 0.5s ease";
                msg.style.opacity = "0";
                setTimeout(() => msg.remove(), 500);
            });
        }, 3000);
    </script>

</body>
</html>

